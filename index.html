<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ””</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toast Notifications</title>
    <style>
      body {
        margin: unset;
        min-height: 100dvh;
        place-content: center;
      }

      [data-toast="popover"] {
        --toast-width: 360px;
        /* --toast-width: 33ch; */
      }

      [data-toast="notification"] {
        display: flex;
        justify-content: space-between;
      }

      [data-toast="popover"]:popover-open {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      /* [data-toast="popover"],
      [data-toast="container"] {
        width: clamp(200px, 40%, 400px);
      } */
    </style>
  </head>
  <body>
    <section>
      <details>
        <summary>Placement</summary>
        <div>
          <button onClick="setToastPlacement('top')">top</button>
          <button onClick="setToastPlacement('top center')">top center</button>
          <button onClick="setToastPlacement('top end')">top end</button>
        </div>
        <div>
          <button onClick="setToastPlacement('bottom')">bottom</button>
          <button onClick="setToastPlacement('bottom center')">bottom center</button>
          <button onClick="setToastPlacement('bottom end')">bottom end</button>
        </div>
      </details>
    </section>

    <button onClick="window.toast.add(Math.random().toString(36).slice(2))">toast</button>
    <script type="module">
      import {ToastQueue} from './src/index.js';

      const toastPlacement = localStorage.getItem('toast-placement') || 'top center';

      const toast = new ToastQueue({
        timeout: null,
        placement: toastPlacement,
        root: document.body
      });

      window.toast = toast;

      window.setToastPlacement = (value) => {
        document.startViewTransition(() => {
          window.toast.placement = value;
        });
        localStorage.setItem('toast-placement', value);
      }


      document.addEventListener('pagereveal', function(event) {

        const viewTransition = event.viewTransition;
        console.log({viewTransition})
      });
    </script>
  </body>
</html>
